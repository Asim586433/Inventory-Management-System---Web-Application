<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMS v2 | Order Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <i class="fas fa-boxes"></i>
                <h1>IMS v2</h1>
            </div>
            
            <div class="user-info">
                <div class="avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="user-details">
                    <h3>Admin User</h3>
                    <p>Administrator</p>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li>
                    <a href="index.html">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="inventory.html">
                        <i class="fas fa-boxes-stacked"></i>
                        <span>Inventory</span>
                        <span class="badge inventory-count">24</span>
                    </a>
                </li>
                <li>
                    <a href="vendor.html">
                        <i class="fas fa-truck"></i>
                        <span>Vendors</span>
                        <span class="badge vendor-count">8</span>
                    </a>
                </li>
                <li>
                    <a href="buyer.html">
                        <i class="fas fa-users"></i>
                        <span>Buyers</span>
                        <span class="badge buyer-count">45</span>
                    </a>
                </li>
                <li class="active">
                    <a href="orders.html">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Orders</span>
                        <span class="badge order-count">12</span>
                    </a>
                </li>
                <li>
                    <a href="scheduling.html">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Scheduling</span>
                        <span class="badge schedule-count">5</span>
                    </a>
                </li>
                <li>
                    <a href="reports.html">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reports</span>
                    </a>
                </li>
                <li>
                    <a href="admin.html">
                        <i class="fas fa-cog"></i>
                        <span>Admin</span>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="notification" id="notificationToggle">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                    <span class="badge notification-count">3</span>
                </div>
                <div class="logout">
                    <a href="#" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <h2>Order Management</h2>
                    <p>Track and manage all customer orders, from creation to fulfillment</p>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="orderSearch" placeholder="Search orders...">
                    </div>
                    <div class="header-actions">
                        <button class="btn-primary" id="createOrderBtn">
                            <i class="fas fa-plus"></i> Create New Order
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- Order Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #4CAF50;">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Total Orders</h3>
                        <p class="stat-number" id="totalOrders">124</p>
                        <p class="stat-change positive">+8 this month</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #2196F3;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Pending</h3>
                        <p class="stat-number" id="pendingOrders">12</p>
                        <p class="stat-change positive">-3 this week</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #FF9800;">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Processing</h3>
                        <p class="stat-number" id="processingOrders">8</p>
                        <p class="stat-change positive">+2 today</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #9C27B0;">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Revenue</h3>
                        <p class="stat-number" id="orderRevenue">$45,820</p>
                        <p class="stat-change positive">+15% this month</p>
                    </div>
                </div>
            </div>
            
            <!-- Order Filters -->
            <div class="filters-card">
                <div class="filter-group">
                    <label for="orderStatusFilter">Status:</label>
                    <select id="orderStatusFilter">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="processing">Processing</option>
                        <option value="shipped">Shipped</option>
                        <option value="delivered">Delivered</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="orderDateFilter">Date Range:</label>
                    <select id="orderDateFilter">
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month" selected>This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="buyerFilter">Buyer:</label>
                    <select id="buyerFilter">
                        <option value="all">All Buyers</option>
                        <!-- Buyer options will be populated dynamically -->
                    </select>
                </div>
                <button class="btn-secondary" id="resetOrderFilters">Reset Filters</button>
            </div>
            
            <!-- Order Table -->
            <div class="content-card full-width">
                <div class="card-header">
                    <h3>Recent Orders</h3>
                    <div class="card-actions">
                        <button class="btn-secondary" id="exportOrders">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn-secondary" id="bulkUpdateOrders">
                            <i class="fas fa-sync"></i> Bulk Update
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="orderTable">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Buyer</th>
                                <th>Items</th>
                                <th>Total Amount</th>
                                <th>Status</th>
                                <th>Payment</th>
                                <th>Order Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="orderTableBody">
                            <!-- Order data will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
                <div class="table-footer">
                    <div class="table-info">
                        Showing <span id="showingOrders">10</span> of <span id="totalOrdersCount">124</span> orders
                    </div>
                    <div class="pagination">
                        <button class="pagination-btn" id="prevOrderPage" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="page-numbers">
                            <span id="currentOrderPage">1</span> of <span id="totalOrderPages">13</span>
                        </span>
                        <button class="pagination-btn" id="nextOrderPage">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Order Status Timeline -->
            <div class="content-grid">
                <div class="content-card">
                    <div class="card-header">
                        <h3>Order Status Distribution</h3>
                    </div>
                    <div class="status-distribution">
                        <canvas id="orderStatusChart"></canvas>
                    </div>
                </div>
                
                <div class="content-card">
                    <div class="card-header">
                        <h3>Quick Order Actions</h3>
                    </div>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" id="processOrdersBtn">
                            <i class="fas fa-play-circle"></i>
                            <span>Process Selected</span>
                        </button>
                        <button class="quick-action-btn" id="shipOrdersBtn">
                            <i class="fas fa-shipping-fast"></i>
                            <span>Mark as Shipped</span>
                        </button>
                        <button class="quick-action-btn" id="invoiceOrdersBtn">
                            <i class="fas fa-file-invoice"></i>
                            <span>Generate Invoice</span>
                        </button>
                        <button class="quick-action-btn" id="cancelOrdersBtn">
                            <i class="fas fa-times-circle"></i>
                            <span>Cancel Orders</span>
                        </button>
                    </div>
                    <div class="pending-actions">
                        <h4>Pending Actions</h4>
                        <div class="pending-item">
                            <i class="fas fa-exclamation-circle"></i>
                            <span>3 orders awaiting payment confirmation</span>
                            <button class="btn-small">Review</button>
                        </div>
                        <div class="pending-item">
                            <i class="fas fa-calendar-check"></i>
                            <span>5 orders scheduled for pickup today</span>
                            <button class="btn-small">View</button>
                        </div>
                        <div class="pending-item">
                            <i class="fas fa-box"></i>
                            <span>2 orders ready for packing</span>
                            <button class="btn-small">Process</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Notification Panel -->
        <div class="notification-panel" id="notificationPanel">
            <div class="notification-header">
                <h3>Notifications</h3>
                <button class="close-notifications" id="closeNotifications">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notification-list" id="notificationList">
                <!-- Notifications will be loaded dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Create Order Modal -->
    <div class="modal" id="createOrderModal">
        <div class="modal-content wide-modal">
            <div class="modal-header">
                <h3>Create New Order</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="order-creation-wizard">
                    <div class="wizard-steps">
                        <div class="wizard-step active" data-step="1">
                            <span class="step-number">1</span>
                            <span class="step-label">Select Buyer</span>
                        </div>
                        <div class="wizard-step" data-step="2">
                            <span class="step-number">2</span>
                            <span class="step-label">Add Items</span>
                        </div>
                        <div class="wizard-step" data-step="3">
                            <span class="step-number">3</span>
                            <span class="step-label">Shipping & Payment</span>
                        </div>
                        <div class="wizard-step" data-step="4">
                            <span class="step-number">4</span>
                            <span class="step-label">Review & Confirm</span>
                        </div>
                    </div>
                    
                    <div class="wizard-content">
                        <div class="wizard-pane active" data-pane="1">
                            <div class="form-group">
                                <label for="orderBuyer">Select Buyer *</label>
                                <select id="orderBuyer" required>
                                    <option value="">Select a buyer</option>
                                    <!-- Buyer options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="buyer-info-preview" id="buyerInfoPreview" style="display: none;">
                                <h4>Buyer Information</h4>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">Company:</span>
                                        <span class="info-value" id="previewCompany">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Contact:</span>
                                        <span class="info-value" id="previewContact">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Email:</span>
                                        <span class="info-value" id="previewEmail">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Phone:</span>
                                        <span class="info-value" id="previewPhone">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wizard-pane" data-pane="2">
                            <div class="add-items-section">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="itemSearch">Search Inventory Items</label>
                                        <input type="text" id="itemSearch" placeholder="Search by name, SKU, or category">
                                    </div>
                                    <button class="btn-secondary" id="browseInventory">
                                        <i class="fas fa-boxes"></i> Browse Inventory
                                    </button>
                                </div>
                                <div class="order-items-list" id="orderItemsList">
                                    <!-- Order items will be added here -->
                                </div>
                                <div class="order-summary">
                                    <div class="summary-item">
                                        <span>Subtotal:</span>
                                        <span id="orderSubtotal">$0.00</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Tax:</span>
                                        <span id="orderTax">$0.00</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Shipping:</span>
                                        <span id="orderShipping">$0.00</span>
                                    </div>
                                    <div class="summary-item total">
                                        <span>Total:</span>
                                        <span id="orderTotal">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wizard-pane" data-pane="3">
                            <!-- Shipping and payment details -->
                        </div>
                        
                        <div class="wizard-pane" data-pane="4">
                            <!-- Review and confirm -->
                        </div>
                    </div>
                    
                    <div class="wizard-navigation">
                        <button class="btn-secondary" id="prevWizardStep" disabled>Previous</button>
                        <button class="btn-primary" id="nextWizardStep">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification Container -->
    <div id="toastContainer"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script src="orders.js"></script>
</body>
</html>
